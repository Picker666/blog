(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{438:function(t,s,v){"use strict";v.r(s);var _=v(54),a=Object(_.a)({},(function(){var t=this,s=t.$createElement,v=t._self._c||s;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"存储"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#存储"}},[t._v("#")]),t._v(" 存储")]),t._v(" "),v("h2",{attrs:{id:"优劣"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#优劣"}},[t._v("#")]),t._v(" 优劣")]),t._v(" "),v("h3",{attrs:{id:"_1、localstorage"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1、localstorage"}},[t._v("#")]),t._v(" 1、"),v("code",[t._v("localStorage")])]),t._v(" "),v("p",[t._v("将数据保存在客户端本地的硬件设备(通常指硬盘，也可以是其他硬件设备)中，即使浏览器被关闭了，该数据仍然存在，下次打开浏览器访问网站时仍然可以继续使用。")]),t._v(" "),v("p",[v("strong",[t._v("优点：")])]),t._v(" "),v("ul",[v("li",[v("code",[t._v("localStorage")]),t._v("生命周期是永久，这意味着除非用户显示在浏览器提供的UI上清除"),v("code",[t._v("localStorage")]),t._v("信息，否则这些信息将永远存在。")]),t._v(" "),v("li",[t._v("相同浏览器的不同页面间可以共享相同的 "),v("code",[t._v("localStorage")]),t._v("（页面属于相同域名和端口）。")])]),t._v(" "),v("p",[v("strong",[t._v("缺点:")])]),t._v(" "),v("ul",[v("li",[t._v("同一个属性名的数据会被替换。")]),t._v(" "),v("li",[t._v("不同浏览器无法共享"),v("code",[t._v("localStorage")]),t._v("或"),v("code",[t._v("sessionStorage")]),t._v("中的信息。")])]),t._v(" "),v("h3",{attrs:{id:"_2、sessionstorage"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2、sessionstorage"}},[t._v("#")]),t._v(" ２、"),v("code",[t._v("sessionStorage")])]),t._v(" "),v("p",[t._v("将数据保存在"),v("code",[t._v("session")]),t._v("对象中。所谓"),v("code",[t._v("session")]),t._v("，是指用户在浏览某个网站时，从进入网站到浏览器关闭所经过的这段时间，也就是用户浏览这个网站所花费的时间。"),v("code",[t._v("session")]),t._v("对象可以用来保存在这段时间内所要求保存的任何数据")]),t._v(" "),v("p",[v("strong",[t._v("优点：")])]),t._v(" "),v("ul",[v("li",[v("code",[t._v("sessionStorage")]),t._v("生命周期为当前窗口或标签页，")]),t._v(" "),v("li",[v("code",[t._v("sessionStorage")]),t._v("的数据不会被其他窗口清除")]),t._v(" "),v("li",[t._v("页面及标 签页仅指顶级窗口，如果一个标签页包含多个iframe标签且他们属于"),v("RouterLink",{attrs:{to:"/base/storage.html#同源"}},[t._v("同源")]),t._v("页面，那么他们之间是可以共享"),v("code",[t._v("sessionStorage")]),t._v("的。")],1)]),t._v(" "),v("p",[v("strong",[t._v("缺点：")])]),t._v(" "),v("ul",[v("li",[t._v("一旦窗口或标签页被永久关闭了，那么所有通过"),v("code",[t._v("sessionStorage")]),t._v("存储的数据也就被清空了。")])]),t._v(" "),v("h3",{attrs:{id:"_3、cookie"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3、cookie"}},[t._v("#")]),t._v(" 3、cookie")]),t._v(" "),v("ul",[v("li",[v("p",[v("code",[t._v("HTTP Cookie")]),t._v("简称"),v("code",[t._v("cookie")]),t._v(",在HTTP请求发送"),v("code",[t._v("Set-Cookie")]),t._v(" HTTP头作为响应的一部分。通过"),v("code",[t._v("name=value")]),t._v("的形式存储")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("cookie")]),t._v("的构成：\n名称："),v("code",[t._v("name")]),t._v("(不区分大小写,但最好认为它是区分的)"),v("br"),t._v("\n值: "),v("code",[t._v("value")]),t._v("(通过URL编码:"),v("code",[t._v("encodeURIComponent")]),t._v(")"),v("br"),t._v("\n域"),v("br"),t._v("\n路径"),v("br"),t._v("\n失效时间:一般默认是浏览器关闭失效,可以自己设置失效时间"),v("br"),t._v("\n安全标志:设置安全标志后只有SSL连接的时候才发送到服务器"),v("br")])]),t._v(" "),v("li",[v("p",[v("code",[t._v("cookie")]),t._v("的作用:主要用于保存登录信息")])]),t._v(" "),v("li",[v("p",[t._v("生命期为只在设置的"),v("code",[t._v("cookie")]),t._v("过期时间之前一直有效，即使窗口或浏览器关闭。 存放数据大小为4K左右 。有个数限制（各浏览器不同），一般不能超过"),v("code",[t._v("20")]),t._v("个。与服务器端通信：每次都会携带在"),v("code",[t._v("HTTP")]),t._v("头中，如果使用"),v("code",[t._v("cookie")]),t._v("保存过多数据会带来性能问题")])])]),t._v(" "),v("h3",{attrs:{id:"cookie的优点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie的优点"}},[t._v("#")]),t._v(" "),v("code",[t._v("cookie")]),t._v("的优点")]),t._v(" "),v("ul",[v("li",[t._v("具有极高的扩展性和可用性")]),t._v(" "),v("li",[t._v("通过良好的编程，控制保存在"),v("code",[t._v("cookie")]),t._v("中的session对象的大小")]),t._v(" "),v("li",[t._v("通过加密和安全传输技术，减少"),v("code",[t._v("cookie")]),t._v("被破解的可能性")]),t._v(" "),v("li",[t._v("只有在"),v("code",[t._v("cookie")]),t._v("中存放不敏感的数据，即使被盗取也不会有很大的损失")]),t._v(" "),v("li",[t._v("控制"),v("code",[t._v("cookie")]),t._v("的生命期，使之不会永远有效。这样的话偷盗者很可能拿到的就 是一个过期的"),v("code",[t._v("cookie")])])]),t._v(" "),v("h3",{attrs:{id:"cookie的缺点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie的缺点"}},[t._v("#")]),t._v(" "),v("code",[t._v("cookie")]),t._v("的缺点")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("cookie")]),t._v("的长度和数量的限制。每个domain最多只能有20条"),v("code",[t._v("cookie")]),t._v("，每个"),v("code",[t._v("cookie")]),t._v("长度不能超过4KB，否则会被截掉\n安全性问题。")]),t._v(" "),v("li",[t._v("如果"),v("code",[t._v("cookie")]),t._v("被人拦掉了，那个人就可以获取到所有session信息。")]),t._v(" "),v("li",[t._v("加密的话也不起什么作用。")]),t._v(" "),v("li",[t._v("有些状态不可能保存在客户端。例如，为了防止重复提交表单，我们需要在服务端保存一个计数器。若吧计数器保存在客户端，则起不到什么作用")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th"),t._v(" "),v("th",[t._v("cookie")]),t._v(" "),v("th",[t._v("localStorage")]),t._v(" "),v("th",[t._v("sessionStorage")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("声明周期")]),t._v(" "),v("td",[t._v("可自行设置过期时间")]),t._v(" "),v("td",[t._v("需自行删除否则一直存在")]),t._v(" "),v("td",[t._v("浏览器关闭")])]),t._v(" "),v("tr",[v("td",[t._v("大小")]),t._v(" "),v("td",[t._v("20条，每条4K")]),t._v(" "),v("td",[t._v("5MB")]),t._v(" "),v("td",[t._v("5MB")])]),t._v(" "),v("tr",[v("td",[t._v("使用")]),t._v(" "),v("td",[t._v("不方便，需要自己封装")]),t._v(" "),v("td",[t._v("可直接使用")]),t._v(" "),v("td",[t._v("可直接使用")])]),t._v(" "),v("tr",[v("td",[t._v("作用域")]),t._v(" "),v("td",[t._v("当前域内，可以使不同的标签页")]),t._v(" "),v("td",[t._v("同源，不同标签页间可以共享")]),t._v(" "),v("td",[t._v("仅当前标签页")])]),t._v(" "),v("tr",[v("td",[t._v("存储位置")]),t._v(" "),v("td",[t._v("本地硬件设备（如：硬盘）")]),t._v(" "),v("td",[t._v("本地硬件设备（如：硬盘）")]),t._v(" "),v("td",[t._v("session对象")])])])]),t._v(" "),v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),v("p",[t._v("时刻注意"),v("a",{attrs:{href:"/base/xss"}},[t._v("XSS")]),t._v("注入的风险，因为可以在控制台直接访问它们，所以不要存入敏感数据")])]),t._v(" "),v("h2",{attrs:{id:"操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#操作"}},[t._v("#")]),t._v(" 操作")]),t._v(" "),v("p",[t._v("一个图表来说明：")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th"),t._v(" "),v("th",[t._v("存储")]),t._v(" "),v("th",[t._v("获取")]),t._v(" "),v("th",[t._v("删除")]),t._v(" "),v("th",[t._v("清除所有")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("localStorage")]),t._v(" "),v("td",[t._v("setItem")]),t._v(" "),v("td",[t._v("getItem")]),t._v(" "),v("td",[t._v("removeItem")]),t._v(" "),v("td",[t._v("clear")])]),t._v(" "),v("tr",[v("td",[t._v("sessionStorage")]),t._v(" "),v("td",[t._v("setItem")]),t._v(" "),v("td",[t._v("getItem")]),t._v(" "),v("td",[t._v("removeItem")]),t._v(" "),v("td",[t._v("clear")])])])]),t._v(" "),v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),v("p",[v("code",[t._v("JSON")]),t._v("对象提供的"),v("code",[t._v("parse")]),t._v("和"),v("code",[t._v("stringify")]),t._v("将其他数据类型转化成字符串，再存储到"),v("code",[t._v("storage")]),t._v("中就可以了")])]),t._v(" "),v("p",[t._v("如下")]),t._v(" "),v("div",{staticClass:"language-js line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 存")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" person "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Picker666"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"18"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nlocalStorage"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userInfo"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取：")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("localStorage"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userInfo"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除：")]),t._v("\nlocalStorage"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userInfo"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清空：")]),t._v("\nlocalStorage"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br"),v("span",{staticClass:"line-number"},[t._v("2")]),v("br"),v("span",{staticClass:"line-number"},[t._v("3")]),v("br"),v("span",{staticClass:"line-number"},[t._v("4")]),v("br"),v("span",{staticClass:"line-number"},[t._v("5")]),v("br"),v("span",{staticClass:"line-number"},[t._v("6")]),v("br"),v("span",{staticClass:"line-number"},[t._v("7")]),v("br"),v("span",{staticClass:"line-number"},[t._v("8")]),v("br"),v("span",{staticClass:"line-number"},[t._v("9")]),v("br"),v("span",{staticClass:"line-number"},[t._v("10")]),v("br"),v("span",{staticClass:"line-number"},[t._v("11")]),v("br"),v("span",{staticClass:"line-number"},[t._v("12")]),v("br")])]),v("h2",{attrs:{id:"同源"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#同源"}},[t._v("#")]),t._v(" 同源")]),t._v(" "),v("p",[t._v("同源的判断规则：")]),t._v(" "),v("p",[t._v('URL"http://www.example.com/dir/page.html"的对比。')]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("对比URL")]),t._v(" "),v("th",[t._v("结果")]),t._v(" "),v("th",[t._v("结果")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("http://www.example.com/dir/page2.html")]),t._v(" "),v("td",[t._v("同源")]),t._v(" "),v("td",[t._v("相同的协议，主机，端口")])]),t._v(" "),v("tr",[v("td",[t._v("http://www.example.com/dir2/other.html")]),t._v(" "),v("td",[t._v("同源")]),t._v(" "),v("td",[t._v("相同的协议，主机，端口")])]),t._v(" "),v("tr",[v("td",[t._v("http://username:password@www.example.com/dir2/other.html")]),t._v(" "),v("td",[t._v("同源")]),t._v(" "),v("td",[t._v("相同的协议，主机，端口")])]),t._v(" "),v("tr",[v("td",[t._v("http://www.example.com:81/dir/other.html")]),t._v(" "),v("td",[t._v("不同源")]),t._v(" "),v("td",[t._v("相同的协议，主机，端口不同")])]),t._v(" "),v("tr",[v("td",[t._v("https://www.example.com/dir/other.html")]),t._v(" "),v("td",[t._v("不同源")]),t._v(" "),v("td",[t._v("协议不同")])]),t._v(" "),v("tr",[v("td",[t._v("http://en.example.com/dir/other.html")]),t._v(" "),v("td",[t._v("不同源")]),t._v(" "),v("td",[t._v("不同主机")])]),t._v(" "),v("tr",[v("td",[t._v("http://example.com/dir/other.html")]),t._v(" "),v("td",[t._v("不同源")]),t._v(" "),v("td",[t._v("不同主机(需要精确匹配)")])]),t._v(" "),v("tr",[v("td",[t._v("http://v2.www.example.com/dir/other.html")]),t._v(" "),v("td",[t._v("不同源")]),t._v(" "),v("td",[t._v("不同主机(需要精确匹配)")])]),t._v(" "),v("tr",[v("td",[t._v("http://www.example.com:80/dir/other.html")]),t._v(" "),v("td",[t._v("看情况")]),t._v(" "),v("td",[t._v("端口明确，依赖浏览器实现")])])])])])}),[],!1,null,null,null);s.default=a.exports}}]);