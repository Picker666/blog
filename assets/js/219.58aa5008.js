(window.webpackJsonp=window.webpackJsonp||[]).push([[219],{607:function(s,t,a){"use strict";a.r(t);var e=a(54),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git-提交规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-提交规范"}},[s._v("#")]),s._v(" Git 提交规范")]),s._v(" "),a("h2",{attrs:{id:"一、message-的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、message-的作用"}},[s._v("#")]),s._v(" 一、message 的作用")]),s._v(" "),a("ul",[a("li",[s._v("1、提供更多的历史信息，方便快速浏览。")])]),s._v(" "),a("p",[s._v("下面的命令显示上次发布后的变动，每个commit占据一行。你只看行首，就知道某次 commit 的目的。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git log <last tag> HEAD --pretty=format:%s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("2、可以过滤某些commit（比如文档改动），便于快速查找信息。")])]),s._v(" "),a("p",[s._v("仅仅显示本次发布新增加的功能。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("git log <last release> HEAD --grep feature\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("3、可以直接从commit生成Change log。")])]),s._v(" "),a("p",[s._v("Change Log 是发布新版本时，用来说明与上一个版本差异的文档")]),s._v(" "),a("h2",{attrs:{id:"二、格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、格式"}},[s._v("#")]),s._v(" 二、格式")]),s._v(" "),a("p",[s._v("每次提交，Commit message 都包括三个部分："),a("strong",[s._v("Header")]),s._v("，"),a("strong",[s._v("Body")]),s._v(" 和 "),a("strong",[s._v("Footer")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("Header 是必需的，Body 和 Footer 可以省略。")]),s._v(" "),a("h3",{attrs:{id:"_1、header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、header"}},[s._v("#")]),s._v(" 1、Header")]),s._v(" "),a("p",[s._v("Header部分只有一行，包括三个字段：type（必需）、scope（可选）和subject（必需）。")]),s._v(" "),a("h4",{attrs:{id:"_1-、type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-、type"}},[s._v("#")]),s._v(" （1）、type")]),s._v(" "),a("p",[s._v("type用于说明 commit 的类别，只允许使用下面7个标识。")]),s._v(" "),a("ul",[a("li",[s._v("feat：新功能（feature）")]),s._v(" "),a("li",[s._v("fix：修补bug")]),s._v(" "),a("li",[s._v("docs：文档（documentation）")]),s._v(" "),a("li",[s._v("style： 格式（不影响代码运行的变动）")]),s._v(" "),a("li",[s._v("refactor：重构（即不是新增功能，也不是修改bug的代码变动）")]),s._v(" "),a("li",[s._v("test：增加测试")]),s._v(" "),a("li",[s._v("chore：构建过程或辅助工具的变动")])]),s._v(" "),a("p",[s._v("如果type为feat和fix，则该 commit 将肯定出现在 Change log 之中。其他情况（docs、chore、style、refactor、test）由你决定，要不要放入 Change log，建议是不要。")]),s._v(" "),a("h4",{attrs:{id:"_2-、scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-、scope"}},[s._v("#")]),s._v(" （2）、scope")]),s._v(" "),a("p",[s._v("scope用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。")]),s._v(" "),a("h4",{attrs:{id:"_3-、subject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-、subject"}},[s._v("#")]),s._v(" （3）、subject")]),s._v(" "),a("p",[s._v("subject是 commit 目的的简短描述，不超过50个字符。")]),s._v(" "),a("ul",[a("li",[s._v("以动词开头，使用第一人称现在时，比如change，而不是changed或changes")]),s._v(" "),a("li",[s._v("第一个字母小写")]),s._v(" "),a("li",[s._v("结尾不加句号（.）")])]),s._v(" "),a("h3",{attrs:{id:"_2、body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、body"}},[s._v("#")]),s._v(" 2、Body")]),s._v(" "),a("p",[s._v("Body 部分是对本次 commit 的详细描述，可以分成多行。下面是一个范例。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("Further paragraphs come after blank lines.\n\n"),a("span",{pre:!0,attrs:{class:"token deleted"}},[s._v("- Bullet points are okay, too")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token deleted"}},[s._v("- Use a hanging indent")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_3、footer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、footer"}},[s._v("#")]),s._v(" 3、Footer")]),s._v(" "),a("p",[s._v("Footer 部分只用于两种情况。")]),s._v(" "),a("ul",[a("li",[s._v("不兼容变动")])]),s._v(" "),a("p",[s._v("如果当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n\n    To migrate the code follow the example below:\n\n    Before:\n\n    scope: {\n      myAttr: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'attribute'")]),s._v(",\n    }\n\n    After:\n\n    scope: {\n      myAttr: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@'")]),s._v(",\n    }\n\n    The removed `inject` wasn't generally useful for directives so there should be no code using it.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("ul",[a("li",[s._v("关闭 Issue")])]),s._v(" "),a("p",[s._v("如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("Closes #234\n\nCloses #123, #245, #992\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_4、revert"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、revert"}},[s._v("#")]),s._v(" 4、Revert")]),s._v(" "),a("p",[s._v("还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以revert:开头，后面跟着被撤销 Commit 的 Header。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v("revert: feat(pencil): add "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'graphiteWidth'")]),s._v(" option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("revert时，一般是自动生成的 message。")])]),s._v(" "),a("p",[s._v("Body部分的格式是固定的，必须写成This reverts commit <hash>.，其中的hash是被撤销 commit 的 SHA 标识符。")]),s._v(" "),a("p",[s._v("如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的Reverts小标题下面。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("message 的格式可以在云效或者github上配置，将在每次push时候检测message格式。")])]),s._v(" "),a("h2",{attrs:{id:"三、validate-commit-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、validate-commit-msg"}},[s._v("#")]),s._v(" 三、validate-commit-msg")]),s._v(" "),a("p",[s._v("validate-commit-msg用于检查 Node 项目的 Commit message 是否符合格式。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ghooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commit-msg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./validate-commit-msg.js"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("每次git commit的时候，这个脚本就会自动检查 Commit message 是否合格。如果不合格，就会报错。")]),s._v(" "),a("div",{staticClass:"language-git line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-git"}},[a("code",[s._v(" git add -A \n git commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"edit markdown"')]),s._v(" \nINVALID COMMIT MSG: does not match "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<type>(<scope>): <subject>"')]),s._v(" ! was: edit markdown\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"四、生产change-log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、生产change-log"}},[s._v("#")]),s._v(" 四、生产Change log")]),s._v(" "),a("p",[s._v("如果你的所有 Commit 都符合 Angular 格式，那么发布新版本时， Change log 就可以用脚本自动生成。")])])}),[],!1,null,null,null);t.default=n.exports}}]);